<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="360" viewBox="0 0 1000 360">
  <style>
    .title{font: bold 18px sans-serif; fill:#0b2545}
    .box{fill:#f6f8fb;stroke:#aab7c7;stroke-width:1}
    .arrow{stroke:#2b7cff;stroke-width:2;fill:none;marker-end:url(#arrow)}
    .small{font: 12px sans-serif; fill:#0b2545}
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="#2b7cff" />
    </marker>
  </defs>

  <text x="20" y="28" class="title">DingBot — architecture overview</text>

  <rect x="40" y="60" width="220" height="80" rx="8" class="box"/>
  <text x="150" y="105" text-anchor="middle" class="small">DingTalk Webhook</text>
  <text x="150" y="122" text-anchor="middle" class="small">(Incoming Messages)</text>

  <rect x="340" y="40" width="260" height="120" rx="8" class="box"/>
  <text x="470" y="78" text-anchor="middle" class="small">Flask Server</text>
  <text x="470" y="95" text-anchor="middle" class="small">/webhook handler</text>
  <text x="470" y="112" text-anchor="middle" class="small">memory_file.jsonl & fact store</text>

  <line x1="260" y1="100" x2="340" y2="100" class="arrow"/>

  <rect x="640" y="40" width="260" height="120" rx="8" class="box"/>
  <text x="770" y="78" text-anchor="middle" class="small">Gemini (Google GenAI)</text>
  <text x="770" y="95" text-anchor="middle" class="small">official SDK</text>

  <line x1="600" y1="100" x2="640" y2="100" class="arrow"/>
  <line x1="600" y1="100" x2="600" y2="200" class="arrow"/>

  <rect x="340" y="190" width="260" height="96" rx="8" class="box"/>
  <text x="470" y="220" text-anchor="middle" class="small">Scheduler</text>
  <text x="470" y="238" text-anchor="middle" class="small">extract facts → push</text>

  <line x1="600" y1="148" x2="640" y2="148" class="arrow"/>
  <line x1="680" y1="100" x2="860" y2="100" class="arrow"/>

  <rect x="40" y="190" width="220" height="96" rx="8" class="box"/>
  <text x="150" y="225" text-anchor="middle" class="small">DingTalk Robot</text>
  <text x="150" y="243" text-anchor="middle" class="small">(Outgoing Messages)</text>
  <line x1="600" y1="240" x2="260" y2="240" class="arrow"/>

  <text x="20" y="330" class="small">Legend: solid arrows = message flow; local files = memory/facts; scheduler runs periodically (default 60s)</text>
</svg>